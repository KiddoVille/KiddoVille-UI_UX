<html>
 <head>
  <title>
   Chat Application
  </title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="./Message.css" />
 </head>
 <body>
  <div class="sidebar">
   <div class="search-bar">
    <a href="../Home/Home.html">
        <img src="../../Assets/back-arrow.svg" alt="back-arrow" style="width: 24px; height: 24px;">
    </a>
    <input placeholder="Search" type="text"/>
    <i class="fas fa-search"></i>
   </div>
   <div class="chat-list">
    <div class="chat-item">
     <img alt="Profile picture of Shinhan Mohamad" height="40" src="../../Assets/face.jpeg" width="40"/>
     <div class="chat-info">
      <span class="name">
       Shinhan Mohamad
      </span>
      <span class="message">
       Maid 1d
      </span>
      <span class="badge">3</span>
     </div>
    </div>
    <div class="chat-item">
     <img alt="Profile picture of Abdulla Aurad" height="40" src="../../Assets/face.jpeg" width="40"/>
     <div class="chat-info">
      <span class="name">
       Abdulla Aurad
      </span>
      <span class="message">
       Teacher 1d
      </span>
      <span class="badge">3</span>
     </div>
    </div>
    <div class="chat-item">
     <img alt="Profile picture of Nimhath Jabir" height="40" src="../../Assets/face.jpeg" width="40"/>
     <div class="chat-info">
      <span class="name">
       Nimhath Jabir
      </span>
      <span class="message">
       Teacher 1d
      </span>
      <span class="badge">3</span>
     </div>
    </div>
    <div class="chat-item">
     <img alt="Profile picture of Murshid Akram" height="40" src="../../Assets/face.jpeg" width="40"/>
     <div class="chat-info">
      <span class="name">
       Murshid Akram
      </span>
      <span class="message">
       Teacher 1d
      </span>
      <span class="badge">3</span>
     </div>
    </div>
    <div class="chat-item">
     <img alt="Profile picture of Shinhan Mohamad" height="40" src="../../Assets/face.jpeg" width="40"/>
     <div class="chat-info">
      <span class="name">
       Shinhan Mohamad
      </span>
      <span class="message">
       Maid 1d
      </span>
      <span class="badge">3</span>
     </div>
    </div>
    <div class="chat-item">
     <img alt="Profile picture of Abdulla Aurad" height="40" src="../../Assets/face.jpeg" width="40"/>
     <div class="chat-info">
      <span class="name">
       Abdulla Aurad
      </span>
      <span class="message">
       Teacher 2d
      </span>
      <span class="badge">3</span>
     </div>
    </div>
    <div class="chat-item">
     <img alt="Profile picture of Nimhath Jabir" height="40" src="../../Assets/face.jpeg" width="40"/>
     <div class="chat-info">
      <span class="name">
       Nimhath Jabir
      </span>
      <span class="message">
       Maid 3d
      </span>
      <span class="badge">3</span>
     </div>
    </div>
    <div class="chat-item">
     <img alt="Profile picture of Murshid Akram" height="40" src="../../Assets/face.jpeg" width="40"/>
     <div class="chat-info">
      <span class="name">
       Murshid Akram
      </span>
      <span class="message">
       Teacher 3d
      </span>
      <span class="badge">3</span>
     </div>
    </div>
    <p class="no-more-chats">No more people to chat with</p>
   </div>
  </div>
  <div class="chat-window">
   <div class="header">
    <img alt="Profile picture of Deepti manohar" height="40" src="../../Assets/face.jpeg" width="40"/>
    <div class="user-info">
     <span class="name">
      Deepti manohar
     </span>
     <span class="status">
      Online . Last seen 3:00 pm
     </span>
    </div>
    <div class="icons">
     <i class="fas fa-sync"></i>
     <i class="fas fa-search">
     </i>
    </div>
   </div>
   <div class="messages">
    <div class="message received">
     <div class="text">
      Hey There?
      <div class="time">
       10:00 am
      </div>
     </div>
    </div>
    <div class="message received">
     <div class="text">
      How are you
      <div class="time">
       10:00 am
      </div>
     </div>
    </div>
    <div class="message sent">
     <div class="text">
      How are you
      <div class="time">
       10:00 am
      </div>
     </div>
    </div>
    <div class="message sent">
     <div class="text">
      How are you
      <div class="time">
       10:00 am
      </div>
     </div>
    </div>
    <div class="message sent">
     <div class="text">
      How are you
      <div class="time">
       10:00 am
      </div>
     </div>
    </div>
    <div class="message sent">
        <div class="text">
            <img src="../../Assets/dashboard-background.jpeg" alt="image" style="border: 2px solid white; border-radius: 10px; width: 400px; height: auto">
         <div class="time">
          10:00 am
         </div>
        </div>
       </div>
    <div class="message received">
     <div class="text">
      Hey There?
      <div class="time">
       10:00 am
      </div>
     </div>
    </div>
    <div class="message received">
     <div class="text">
      How are you
      <div class="time">
       10:00 am
      </div>
     </div>
    </div>
   </div>
   <div class="input-bar">
    <button id="paperclip-btn" style="margin-right: 10px;"><i class="fa fa-paperclip"></i></button>
    <input placeholder="Enter message" type="text"/>
    <button>
     <i class="fas fa-paper-plane"></i>
    </button>
   </div>
    <div id="upload-container" class="upload-container">
        <div class="upload-header">
            <i class="fas fa-upload"></i>
            <h1>Upload Resources</h1>
            <div class="fun-zone">
              <span>F</span><span>U</span><span>N</span> <span>Z</span><span>O</span><span>N</span><span>E</span>
          </div>
        </div>
        <div class="upload-box" id="drop-area">
            <div id="file-list"></div>
            <div id="file-upload">
                <div style="display: flex; justify-content: center; gap: 20px;">
                    <div class="icon-container">
                        <i class="fas fa-image"></i>
                    </div>
                    <div class="icon-container">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="icon-container">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                </div>
                <p>Drag and drop files to upload or</p>
                <button id="upload-btn">Browse</button>
                <small>Supported Files: JPEG, PNG, PDF, DOCX</small>
            </div>
            <div class="url-input">
                <input type="text" placeholder="Add file URL">
            </div>
          <p>You will be notified once the import is successful</p>
            <input type="file" id="file-input" style="display: none;">
        </div>
        <div class="upload-buttons">
            <button id="cancel-btn">Cancel</button>
            <button class="done" style="margin-right: 100px !important;">Done</button>
        </div>
    </div>
</div>
<script>
    const paperclipBtn = document.getElementById('paperclip-btn');
    const uploadContainer = document.getElementById('upload-container');
    const cancelBtn = document.getElementById('cancel-btn');
    const dropArea = document.getElementById('drop-area');
    const uploadBtn = document.getElementById('upload-btn');
    const fileInput = document.getElementById('file-input');
    const uploadcontent = document.getElementById('file-upload')

    // Show upload container when paperclip icon is clicked
    paperclipBtn.addEventListener('click', () => {
      uploadContainer.classList.toggle('active');
    });

    // Hide upload container when cancel button is clicked
    cancelBtn.addEventListener('click', () => {
      uploadContainer.classList.remove('active');
    });

    document.addEventListener('click', (event) => {
        const isClickInside = uploadContainer.contains(event.target) || paperclipBtn.contains(event.target);
        if (!isClickInside) {
            uploadContainer.classList.remove('active');
        }
    });

    // Trigger hidden file input when browse button is clicked
    uploadBtn.addEventListener('click', function () {
      fileInput.click();
    });

    // Handle file selection through the file input
    fileInput.addEventListener('change', function () {
      if (fileInput.files.length > 0) {
        alert("Selected file: " + fileInput.files[0].name);
      }
    });

    // Drag and drop functionality

    // Prevent default behavior (e.g., opening file in browser)
    const preventDefaults = (e) => {
      e.preventDefault();
      e.stopPropagation();
    };

    // Highlight the drop area when a file is dragged over it
    const highlight = () => {
      dropArea.classList.add('dragging');
    };

    // Remove highlight when the file is no longer dragged over the area
    const unhighlight = () => {
      dropArea.classList.remove('dragging');
    };

    // Handle the dropped files
    const handleDrop = (e) => {
      let dt = e.dataTransfer;
      let files = dt.files;
      handleFiles(files); // Process the files
    };

    // Process and handle the uploaded files (could be extended to display the files)
    const handleFiles = (files) => {
    const fileList = document.getElementById('file-list'); // Get the file list container
    fileList.innerHTML = ''; // Clear any previous files

    [...files].forEach(file => {
      const fileElement = document.createElement('div');
      fileElement.classList.add('file-item');
      fileElement.style.display = 'flex';
      fileElement.style.alignItems = 'center';
      fileElement.style.marginBottom = '10px';

      // Create a file icon or preview image
      const iconOrPreview = document.createElement('div');
      iconOrPreview.style.marginRight = '10px';

      // If it's an image, create a preview
      if (file.type.startsWith('image/')) {
        const imgPreview = document.createElement('img');
        imgPreview.src = URL.createObjectURL(file); // Create an image preview
        imgPreview.style.width = '150px';
        imgPreview.style.height = 'auto';
        imgPreview.style.objectFit = 'cover';
        imgPreview.style.borderRadius = '4px';
        iconOrPreview.appendChild(imgPreview);
      } else {
        // Otherwise, create a file icon based on the type
        const fileIcon = document.createElement('i');
        if (file.type === 'application/pdf') {
          fileIcon.classList.add('fas', 'fa-file-pdf');
        } else if (file.type === 'application/msword' || file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {
          fileIcon.classList.add('fas', 'fa-file-word');
        } else {
          fileIcon.classList.add('fas', 'fa-file-alt');
        }
        fileIcon.style.fontSize = '24px';
        iconOrPreview.appendChild(fileIcon);
      }

      // Create a file info div for the name and size
      const fileInfo = document.createElement('div');
      const fileName = document.createElement('p');
      fileName.textContent = file.name;
      fileName.style.margin = '0';
      const fileSize = document.createElement('small');
      fileSize.textContent = `${(file.size / 1024).toFixed(2)} KB`; // Convert size to KB
      fileInfo.appendChild(fileName);
      fileInfo.appendChild(fileSize);

      // Append the icon/preview and file info to the file item element
      fileElement.appendChild(iconOrPreview);
      fileElement.appendChild(fileInfo);

      // Append the file item element to the file list container
      fileList.appendChild(fileElement);

      uploadcontent.classList.toggle('active');
    });
  };

    // Add event listeners for drag-and-drop events
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
      dropArea.addEventListener(eventName, preventDefaults, false);
    });

    // Add event listeners to highlight and unhighlight the drop area
    ['dragenter', 'dragover'].forEach(eventName => {
      dropArea.addEventListener(eventName, highlight, false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
      dropArea.addEventListener(eventName, unhighlight, false);
    });

    // Add event listener to handle file drop
    dropArea.addEventListener('drop', handleDrop, false);
  </script>
 </body>
</html>